<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="hello world example" /> 
  <Content type="html">
     <![CDATA[ 
  <div id="publication_lists"></div>
  <script type="text/javascript">

  // This example fetches data from a CSV file containing contact information. In the CSV file, 
  // each record consists of a name, email address, and phone number.
  function getPublications() {
    var params = {};  
    params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.TEXT;
    var url = "http://www.mendeley.com/profiles/asrul-hadi-yaacob/";
    gadgets.io.makeRequest(url, response, params);
  };
  // Callback function to process the response
  function response(obj) {
    var e = document.createElement('div');
    e.setAttribute('style', 'display: none;');
    e.innerHTML = obj.text;
    document.body.appendChild(e);
    pubs = document.getElementById("publications");
    journal = document.getElementById("JournalArticle");
    for (j=0; j<journal.children.length; j++) {
      alert(journal.children[j].innerHTML);
      alert(journal.children[j].getElementsByClassName("data")[0].getElementsByTagName("a")[0].href);
    }
    document.body.removeChild(e);

    var html = ""; 

    html += pubs.innerHTML;

    html += "</div>";
    // Output html in div.
    document.getElementById('publication_lists').innerHTML = html;
  }
  gadgets.util.registerOnLoadHandler(getPublications);

 </script>
     ]]>
  </Content> 
</Module>

